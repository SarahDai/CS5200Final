{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/Users/monkey/Documents/cs6620_db/project/PM6/safe_travel/src/components/Search.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport Select from \"react-select\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faFilter, faHome, faSearch } from '@fortawesome/free-solid-svg-icons';\nimport { Row, Col, Button, Alert, Badge } from \"reactstrap\";\nimport Listings from \"./Listings\";\nlet searchingBegun = false;\nconst roomTypeOptions = [{\n  value: 'Entire home/apt',\n  label: 'Entire home/apt'\n}, {\n  value: 'Private room',\n  label: 'Private room'\n}, {\n  value: 'Shared room',\n  label: 'Shared room'\n}, {\n  value: 'Hotel room',\n  label: 'Hotel room'\n}];\nconst neighborhoodOptions = [{\n  value: 'Broadway',\n  label: 'Broadway'\n}, {\n  value: 'Belltown',\n  label: 'Belltown'\n}, {\n  value: 'Wallingford',\n  label: 'Wallingford'\n}, {\n  value: 'Central Business District',\n  label: 'Central Business District'\n}, {\n  value: 'University District',\n  label: 'University District'\n}, {\n  value: 'Minor',\n  label: 'Minor'\n}, {\n  value: 'Fremont',\n  label: 'Fremont'\n}, {\n  value: 'Pike-Market',\n  label: 'Pike-Market'\n}];\n\nconst showListing = (type, neighborhood, listing) => {\n  for (let i = 0; i < type.length; i++) {\n    if (listing['RoomType'] !== type[i].value) {\n      return false;\n    }\n  }\n\n  for (let j = 0; j < neighborhood.length; j++) {\n    if (listing['Neighborhood'] !== neighborhood[j].value) {\n      return false;\n    }\n  }\n\n  return true;\n};\n\nconst getSearchedListings = (listings, type, neighborhood) => {\n  let searchedResults = [];\n\n  for (let i = 0; i < listings.length; i++) {\n    if (showListing(type, neighborhood, listings[i])) {\n      searchedResults.push(listings[i]);\n    }\n  }\n\n  return searchedResults;\n};\n\nlet headers = new Headers();\nheaders.append('Content-Type', 'application/json');\nheaders.append('Origin', 'http://localhost:4002');\n\nconst Search = () => {\n  _s();\n\n  const [roomType, setRoomType] = useState([]);\n  const [neighborhood, setNeighborhood] = useState([]);\n  const [data, setData] = useState([]);\n  const [result, setResult] = useState([]);\n  useEffect(() => {\n    fetch('http://localhost:4002/listings', {\n      mode: 'cors',\n      method: 'GET',\n      headers: headers\n    }).then(response => response.json()).then(data => {\n      console.log(data);\n      setData(data);\n    }).catch(error => {\n      console.error('Error fetching listings' + error);\n    });\n  }, []);\n\n  const onSearchClick = () => {\n    searchingBegun = false;\n    setResult(getSearchedListings(data, roomType, neighborhood));\n  };\n\n  const onTypeOptionChange = selectedOptions => {\n    console.log(selectedOptions);\n    searchingBegun = true;\n    setResult([]);\n    setRoomType({\n      selectedOptions\n    });\n  };\n\n  const onNeighborhoodOptionChange = selectedOptions => {\n    searchingBegun = true;\n    setResult([]);\n    setNeighborhood({\n      selectedOptions\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Row, {\n      children: /*#__PURE__*/_jsxDEV(Col, {\n        md: {\n          size: 10,\n          offset: 1\n        },\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [/*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n            icon: faHome\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 102,\n            columnNumber: 24\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"left-padding\",\n            children: \"Places to stay in Seattle. \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 103,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Row, {\n      children: /*#__PURE__*/_jsxDEV(Col, {\n        md: {\n          size: 10,\n          offset: 1\n        },\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [/*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n            icon: faFilter\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 108,\n            columnNumber: 24\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"left-padding\",\n            children: \"Select at least one option to begin:  \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 109,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Row, {\n      className: \"bottom-margin\",\n      children: [/*#__PURE__*/_jsxDEV(Col, {\n        md: {\n          size: 4,\n          offset: 1\n        },\n        children: /*#__PURE__*/_jsxDEV(Select, {\n          options: roomTypeOptions,\n          placeholder: \"Room Type...\",\n          onChange: onTypeOptionChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 114,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 113,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Col, {\n        md: {\n          size: 4\n        },\n        align: \"center\",\n        children: /*#__PURE__*/_jsxDEV(Select, {\n          options: neighborhoodOptions,\n          placeholder: \"Neighborhood...\",\n          onChange: onNeighborhoodOptionChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Col, {\n        md: \"3\",\n        align: \"left\",\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          color: \"secondary\",\n          active: roomType.length > 0 || neighborhood.length > 0,\n          disabled: roomType.length === 0 && neighborhood.length === 0,\n          onClick: () => {\n            onSearchClick();\n          },\n          children: [/*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n            icon: faSearch\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 131,\n            columnNumber: 36\n          }, this), ' ', \"Search\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Row, {\n      children: /*#__PURE__*/_jsxDEV(Col, {\n        md: {\n          size: 10,\n          offset: 1\n        },\n        children: !searchingBegun && (roomType.length > 0 || neighborhood.length > 0) && result.length === 0 && /*#__PURE__*/_jsxDEV(Alert, {\n          color: \"danger\",\n          children: \"The listings doesn't have satisfied result for your query. Modify your configuration and try again!\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 140,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 13\n    }, this), result.length > 0 && /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(Row, {\n        children: /*#__PURE__*/_jsxDEV(Col, {\n          md: {\n            size: 10,\n            offset: 1\n          },\n          children: /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 151,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 150,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(Row, {\n        children: /*#__PURE__*/_jsxDEV(Col, {\n          xs: {\n            size: 3,\n            offset: 1\n          },\n          children: /*#__PURE__*/_jsxDEV(Badge, {\n            children: [result.length, \" stays in Seattle\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 156,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 155,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 154,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true), /*#__PURE__*/_jsxDEV(Listings, {\n      listings: result\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true);\n};\n\n_s(Search, \"yBjudhhUhszD68NG6tR4kW4BI+4=\");\n\n_c = Search;\nexport default Search;\n\nvar _c;\n\n$RefreshReg$(_c, \"Search\");","map":{"version":3,"sources":["/Users/monkey/Documents/cs6620_db/project/PM6/safe_travel/src/components/Search.js"],"names":["React","useState","useEffect","Select","FontAwesomeIcon","faFilter","faHome","faSearch","Row","Col","Button","Alert","Badge","Listings","searchingBegun","roomTypeOptions","value","label","neighborhoodOptions","showListing","type","neighborhood","listing","i","length","j","getSearchedListings","listings","searchedResults","push","headers","Headers","append","Search","roomType","setRoomType","setNeighborhood","data","setData","result","setResult","fetch","mode","method","then","response","json","console","log","catch","error","onSearchClick","onTypeOptionChange","selectedOptions","onNeighborhoodOptionChange","size","offset"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport Select from \"react-select\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faFilter, faHome, faSearch } from '@fortawesome/free-solid-svg-icons';\nimport { Row, Col, Button, Alert, Badge } from \"reactstrap\";\nimport Listings from \"./Listings\";\n\nlet searchingBegun = false;\n\nconst roomTypeOptions = [\n    { value: 'Entire home/apt', label: 'Entire home/apt' },\n    { value: 'Private room', label: 'Private room' },\n    { value: 'Shared room', label: 'Shared room'},\n    { value: 'Hotel room', label: 'Hotel room'}\n]\n\nconst neighborhoodOptions = [\n    { value: 'Broadway', label: 'Broadway' },\n    { value: 'Belltown', label: 'Belltown' },\n    { value: 'Wallingford', label: 'Wallingford'},\n    { value: 'Central Business District', label: 'Central Business District' },\n    { value: 'University District', label: 'University District'},\n    { value: 'Minor', label: 'Minor'},\n    { value: 'Fremont', label: 'Fremont'},\n    { value: 'Pike-Market', label: 'Pike-Market'}\n]\n\nconst showListing = (type, neighborhood, listing) => {\n    for (let i = 0; i < type.length; i++) {\n        if (listing['RoomType'] !== type[i].value) {\n            return false;\n        }\n    }\n\n    for (let j = 0; j < neighborhood.length; j++) {\n        if (listing['Neighborhood'] !== neighborhood[j].value) {\n            return false;\n        }\n    }\n    return true;\n}\n\nconst getSearchedListings = (listings, type, neighborhood) => {\n    let searchedResults = []\n    for (let i = 0; i < listings.length; i++) {\n        if (showListing(type, neighborhood, listings[i])) {\n            searchedResults.push(listings[i])\n        }\n    }\n    return searchedResults;\n}\n\nlet headers = new Headers();\n\nheaders.append('Content-Type', 'application/json');\nheaders.append('Origin','http://localhost:4002');\n\nconst Search = () => {\n    const [roomType, setRoomType] = useState([]);\n    const [neighborhood, setNeighborhood] = useState([]);\n    const [data, setData] = useState([]);\n    const [result, setResult] = useState([]);\n\n    useEffect(() => {\n        fetch('http://localhost:4002/listings',{\n            mode: 'cors',\n            method: 'GET',\n            headers: headers\n        })\n            .then(response => response.json())\n            .then(data => {\n                console.log(data);\n                setData(data);\n            })\n            .catch(error => {\n                console.error('Error fetching listings' + error);\n            })\n    },[]);\n\n    const onSearchClick = () => {\n        searchingBegun = false;\n        setResult(getSearchedListings(data, roomType, neighborhood));\n    }\n\n    const onTypeOptionChange = selectedOptions => {\n        console.log(selectedOptions);\n        searchingBegun = true;\n        setResult([]);\n        setRoomType({ selectedOptions });\n    }\n\n    const onNeighborhoodOptionChange = selectedOptions => {\n        searchingBegun = true;\n        setResult([]);\n        setNeighborhood({ selectedOptions });\n    }\n\n    return (\n        <>\n            <Row>\n                <Col md={{size: 10, offset: 1}}>\n                    <p><FontAwesomeIcon icon={faHome} />\n                    <span className=\"left-padding\">Places to stay in Seattle. </span></p>\n                </Col>\n            </Row>\n            <Row>\n                <Col md={{size: 10, offset: 1}}>\n                    <p><FontAwesomeIcon icon={faFilter} />\n                    <span className=\"left-padding\">Select at least one option to begin:  </span></p>\n                </Col>\n            </Row>\n            <Row className=\"bottom-margin\">\n                <Col md={{size:4, offset: 1}}>\n                    <Select options={roomTypeOptions}\n                            placeholder=\"Room Type...\"\n                            onChange={onTypeOptionChange}\n                            />\n                </Col>\n                <Col md={{size:4}} align=\"center\">\n                    <Select options={neighborhoodOptions}\n                            placeholder=\"Neighborhood...\"\n                            onChange={onNeighborhoodOptionChange}\n                            />\n                </Col>\n                <Col md=\"3\" align=\"left\">\n                    <Button color=\"secondary\"\n                            active={roomType.length > 0 || neighborhood.length > 0}\n                            disabled={roomType.length === 0 && neighborhood.length === 0}\n                            onClick={() => {\n                                onSearchClick();\n                                }}><FontAwesomeIcon icon={faSearch} />{' '}\n                        Search\n                    </Button>\n                </Col>\n            </Row>\n            <Row>\n                <Col md={{size: 10, offset: 1}}>\n                {\n                    !searchingBegun && (roomType.length > 0 || neighborhood.length > 0) && result.length === 0 &&\n                        <Alert color=\"danger\">The listings doesn't have satisfied result for your query.\n                        Modify your configuration and try again!</Alert>\n                }\n                </Col>\n            </Row>\n            {\n                result.length > 0 \n                && \n                <>\n                    <Row>\n                        <Col md={{size: 10, offset: 1}}>\n                            <hr />\n                        </Col>\n                    </Row>\n                    <Row>\n                        <Col xs={{size:3, offset:1}}>\n                            <Badge>{result.length} stays in Seattle</Badge>\n                        </Col>\n                    </Row>\n                </>\n            }\n            <Listings listings={result} />\n        </>\n    )\n\n\n\n}\n\nexport default Search;"]},"metadata":{},"sourceType":"module"}