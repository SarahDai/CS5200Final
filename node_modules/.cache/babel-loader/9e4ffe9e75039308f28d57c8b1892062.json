{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/Users/monkey/Documents/cs6620_db/project/PM6/safe_travel/src/components/Search.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport Select from \"react-select\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faFilter, faHome, faSearch } from '@fortawesome/free-solid-svg-icons';\nimport { Row, Col, Button, Alert, Badge } from \"reactstrap\";\nimport Listings from \"./Listings\";\nlet searchingBegun = false;\nconst roomTypeOptions = [{\n  value: 'Any',\n  label: 'Any type'\n}, {\n  value: 'Entire home/apt',\n  label: 'Entire home/apt'\n}, {\n  value: 'Private room',\n  label: 'Private room'\n}, {\n  value: 'Shared room',\n  label: 'Shared room'\n}, {\n  value: 'Hotel room',\n  label: 'Hotel room'\n}];\nconst neighborhoodOptions = [{\n  value: 'Broadway',\n  label: 'Broadway'\n}, {\n  value: 'Belltown',\n  label: 'Belltown'\n}, {\n  value: 'Wallingford',\n  label: 'Wallingford'\n}, {\n  value: 'Central Business District',\n  label: 'Central Business District'\n}, {\n  value: 'University District',\n  label: 'University District'\n}, {\n  value: 'Minor',\n  label: 'Minor'\n}, {\n  value: 'Fremont',\n  label: 'Fremont'\n}, {\n  value: 'Pike-Market',\n  label: 'Pike-Market'\n}];\n\nconst getSearchedListings = (listings, type, neighborhood) => {\n  let searchedResults = [...listings];\n  console.log(\"get search\", type);\n\n  if (type.length > 0 && type[0].value !== 'Any') {\n    searchedResults = searchedResults.filter(listing => listing['RoomType'] === type[0].value);\n  }\n\n  ;\n\n  if (neighborhood.length > 0) {\n    searchedResults = searchedResults.filter(listing => listing['Neighborhood'] === neighborhood[0].value);\n  }\n\n  ;\n  return searchedResults;\n};\n\nlet headers = new Headers();\nheaders.append('Content-Type', 'application/json');\nheaders.append('Origin', 'http://localhost:4002');\n\nconst Search = () => {\n  _s();\n\n  const [roomType, setRoomType] = useState([]);\n  const [neighborhood, setNeighborhood] = useState([]);\n  const [data, setData] = useState([]);\n  const [result, setResult] = useState([]);\n  useEffect(() => {\n    fetch('http://localhost:4002/listings', {\n      mode: 'cors',\n      method: 'GET',\n      headers: headers\n    }).then(response => response.json()).then(data => {\n      setData(data);\n    }).catch(error => {\n      console.error('Error fetching listings' + error);\n    });\n  }, []);\n\n  const onSearchClick = () => {\n    searchingBegun = false;\n    console.log(roomType);\n    console.log(neighborhood);\n    setResult(getSearchedListings(data, roomType, neighborhood));\n  };\n\n  const onTypeOptionChange = selectedOptions => {\n    console.log(selectedOptions);\n    searchingBegun = true;\n    setResult([]);\n    setRoomType({\n      selectedOptions\n    });\n  };\n\n  const onNeighborhoodOptionChange = selectedOptions => {\n    searchingBegun = true;\n    setResult([]);\n    setNeighborhood({\n      selectedOptions\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Row, {\n      children: /*#__PURE__*/_jsxDEV(Col, {\n        md: {\n          size: 10,\n          offset: 1\n        },\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [/*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n            icon: faHome\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 91,\n            columnNumber: 24\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"left-padding\",\n            children: \"Places to stay in Seattle. \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 92,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Row, {\n      children: /*#__PURE__*/_jsxDEV(Col, {\n        md: {\n          size: 10,\n          offset: 1\n        },\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [/*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n            icon: faFilter\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 97,\n            columnNumber: 24\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"left-padding\",\n            children: \"Select at least one option to begin:  \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Row, {\n      className: \"bottom-margin\",\n      children: [/*#__PURE__*/_jsxDEV(Col, {\n        md: {\n          size: 4,\n          offset: 1\n        },\n        children: /*#__PURE__*/_jsxDEV(Select, {\n          options: roomTypeOptions,\n          placeholder: \"Room Type...\",\n          onChange: onTypeOptionChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Col, {\n        md: {\n          size: 4\n        },\n        align: \"center\",\n        children: /*#__PURE__*/_jsxDEV(Select, {\n          options: neighborhoodOptions,\n          placeholder: \"Neighborhood...\",\n          onChange: onNeighborhoodOptionChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 108,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Col, {\n        md: \"3\",\n        align: \"left\",\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          color: \"secondary\",\n          active: roomType.length > 0 || neighborhood.length > 0,\n          disabled: roomType.length === 0 && neighborhood.length === 0,\n          onClick: () => {\n            onSearchClick();\n          },\n          children: [/*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n            icon: faSearch\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 120,\n            columnNumber: 36\n          }, this), ' ', \"Search\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Row, {\n      children: /*#__PURE__*/_jsxDEV(Col, {\n        md: {\n          size: 10,\n          offset: 1\n        },\n        children: !searchingBegun && (roomType.length > 0 || neighborhood.length > 0) && result.length === 0 && /*#__PURE__*/_jsxDEV(Alert, {\n          color: \"danger\",\n          children: \"The listings doesn't have satisfied result for your query. Modify your configuration and try again!\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 129,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 13\n    }, this), result.length > 0 && /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(Row, {\n        children: /*#__PURE__*/_jsxDEV(Col, {\n          md: {\n            size: 10,\n            offset: 1\n          },\n          children: /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 140,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 139,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(Row, {\n        children: /*#__PURE__*/_jsxDEV(Col, {\n          xs: {\n            size: 3,\n            offset: 1\n          },\n          children: /*#__PURE__*/_jsxDEV(Badge, {\n            children: [result.length, \" stays in Seattle\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 145,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 144,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 143,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(Listings, {\n        listings: result\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true)]\n  }, void 0, true);\n};\n\n_s(Search, \"yBjudhhUhszD68NG6tR4kW4BI+4=\");\n\n_c = Search;\nexport default Search;\n\nvar _c;\n\n$RefreshReg$(_c, \"Search\");","map":{"version":3,"sources":["/Users/monkey/Documents/cs6620_db/project/PM6/safe_travel/src/components/Search.js"],"names":["React","useState","useEffect","Select","FontAwesomeIcon","faFilter","faHome","faSearch","Row","Col","Button","Alert","Badge","Listings","searchingBegun","roomTypeOptions","value","label","neighborhoodOptions","getSearchedListings","listings","type","neighborhood","searchedResults","console","log","length","filter","listing","headers","Headers","append","Search","roomType","setRoomType","setNeighborhood","data","setData","result","setResult","fetch","mode","method","then","response","json","catch","error","onSearchClick","onTypeOptionChange","selectedOptions","onNeighborhoodOptionChange","size","offset"],"mappings":";;;;;;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,OAAOC,MAAP,MAAmB,cAAnB;AACA,SAASC,eAAT,QAAgC,gCAAhC;AACA,SAASC,QAAT,EAAmBC,MAAnB,EAA2BC,QAA3B,QAA2C,mCAA3C;AACA,SAASC,GAAT,EAAcC,GAAd,EAAmBC,MAAnB,EAA2BC,KAA3B,EAAkCC,KAAlC,QAA+C,YAA/C;AACA,OAAOC,QAAP,MAAqB,YAArB;AAEA,IAAIC,cAAc,GAAG,KAArB;AAEA,MAAMC,eAAe,GAAG,CACpB;AAAEC,EAAAA,KAAK,EAAE,KAAT;AAAgBC,EAAAA,KAAK,EAAE;AAAvB,CADoB,EAEpB;AAAED,EAAAA,KAAK,EAAE,iBAAT;AAA4BC,EAAAA,KAAK,EAAE;AAAnC,CAFoB,EAGpB;AAAED,EAAAA,KAAK,EAAE,cAAT;AAAyBC,EAAAA,KAAK,EAAE;AAAhC,CAHoB,EAIpB;AAAED,EAAAA,KAAK,EAAE,aAAT;AAAwBC,EAAAA,KAAK,EAAE;AAA/B,CAJoB,EAKpB;AAAED,EAAAA,KAAK,EAAE,YAAT;AAAuBC,EAAAA,KAAK,EAAE;AAA9B,CALoB,CAAxB;AAQA,MAAMC,mBAAmB,GAAG,CACxB;AAAEF,EAAAA,KAAK,EAAE,UAAT;AAAqBC,EAAAA,KAAK,EAAE;AAA5B,CADwB,EAExB;AAAED,EAAAA,KAAK,EAAE,UAAT;AAAqBC,EAAAA,KAAK,EAAE;AAA5B,CAFwB,EAGxB;AAAED,EAAAA,KAAK,EAAE,aAAT;AAAwBC,EAAAA,KAAK,EAAE;AAA/B,CAHwB,EAIxB;AAAED,EAAAA,KAAK,EAAE,2BAAT;AAAsCC,EAAAA,KAAK,EAAE;AAA7C,CAJwB,EAKxB;AAAED,EAAAA,KAAK,EAAE,qBAAT;AAAgCC,EAAAA,KAAK,EAAE;AAAvC,CALwB,EAMxB;AAAED,EAAAA,KAAK,EAAE,OAAT;AAAkBC,EAAAA,KAAK,EAAE;AAAzB,CANwB,EAOxB;AAAED,EAAAA,KAAK,EAAE,SAAT;AAAoBC,EAAAA,KAAK,EAAE;AAA3B,CAPwB,EAQxB;AAAED,EAAAA,KAAK,EAAE,aAAT;AAAwBC,EAAAA,KAAK,EAAE;AAA/B,CARwB,CAA5B;;AAWA,MAAME,mBAAmB,GAAG,CAACC,QAAD,EAAWC,IAAX,EAAiBC,YAAjB,KAAkC;AAC1D,MAAIC,eAAe,GAAG,CAAC,GAAGH,QAAJ,CAAtB;AACAI,EAAAA,OAAO,CAACC,GAAR,CAAY,YAAZ,EAA0BJ,IAA1B;;AACA,MAAIA,IAAI,CAACK,MAAL,GAAc,CAAd,IAAmBL,IAAI,CAAC,CAAD,CAAJ,CAAQL,KAAR,KAAkB,KAAzC,EAAgD;AAC5CO,IAAAA,eAAe,GAAGA,eAAe,CAACI,MAAhB,CAAuBC,OAAO,IAAIA,OAAO,CAAC,UAAD,CAAP,KAAwBP,IAAI,CAAC,CAAD,CAAJ,CAAQL,KAAlE,CAAlB;AACH;;AAAA;;AACD,MAAIM,YAAY,CAACI,MAAb,GAAsB,CAA1B,EAA6B;AACzBH,IAAAA,eAAe,GAAGA,eAAe,CAACI,MAAhB,CAAuBC,OAAO,IAAIA,OAAO,CAAC,cAAD,CAAP,KAA4BN,YAAY,CAAC,CAAD,CAAZ,CAAgBN,KAA9E,CAAlB;AACH;;AAAA;AACD,SAAOO,eAAP;AACH,CAVD;;AAYA,IAAIM,OAAO,GAAG,IAAIC,OAAJ,EAAd;AAEAD,OAAO,CAACE,MAAR,CAAe,cAAf,EAA+B,kBAA/B;AACAF,OAAO,CAACE,MAAR,CAAe,QAAf,EAAwB,uBAAxB;;AAEA,MAAMC,MAAM,GAAG,MAAM;AAAA;;AACjB,QAAM,CAACC,QAAD,EAAWC,WAAX,IAA0BjC,QAAQ,CAAC,EAAD,CAAxC;AACA,QAAM,CAACqB,YAAD,EAAea,eAAf,IAAkClC,QAAQ,CAAC,EAAD,CAAhD;AACA,QAAM,CAACmC,IAAD,EAAOC,OAAP,IAAkBpC,QAAQ,CAAC,EAAD,CAAhC;AACA,QAAM,CAACqC,MAAD,EAASC,SAAT,IAAsBtC,QAAQ,CAAC,EAAD,CAApC;AAEAC,EAAAA,SAAS,CAAC,MAAM;AACZsC,IAAAA,KAAK,CAAC,gCAAD,EAAkC;AACnCC,MAAAA,IAAI,EAAE,MAD6B;AAEnCC,MAAAA,MAAM,EAAE,KAF2B;AAGnCb,MAAAA,OAAO,EAAEA;AAH0B,KAAlC,CAAL,CAKKc,IALL,CAKUC,QAAQ,IAAIA,QAAQ,CAACC,IAAT,EALtB,EAMKF,IANL,CAMUP,IAAI,IAAI;AACVC,MAAAA,OAAO,CAACD,IAAD,CAAP;AACH,KARL,EASKU,KATL,CASWC,KAAK,IAAI;AACZvB,MAAAA,OAAO,CAACuB,KAAR,CAAc,4BAA4BA,KAA1C;AACH,KAXL;AAYH,GAbQ,EAaP,EAbO,CAAT;;AAeA,QAAMC,aAAa,GAAG,MAAM;AACxBlC,IAAAA,cAAc,GAAG,KAAjB;AACAU,IAAAA,OAAO,CAACC,GAAR,CAAYQ,QAAZ;AACAT,IAAAA,OAAO,CAACC,GAAR,CAAYH,YAAZ;AACAiB,IAAAA,SAAS,CAACpB,mBAAmB,CAACiB,IAAD,EAAOH,QAAP,EAAiBX,YAAjB,CAApB,CAAT;AACH,GALD;;AAOA,QAAM2B,kBAAkB,GAAGC,eAAe,IAAI;AAC1C1B,IAAAA,OAAO,CAACC,GAAR,CAAYyB,eAAZ;AACApC,IAAAA,cAAc,GAAG,IAAjB;AACAyB,IAAAA,SAAS,CAAC,EAAD,CAAT;AACAL,IAAAA,WAAW,CAAC;AAAEgB,MAAAA;AAAF,KAAD,CAAX;AACH,GALD;;AAOA,QAAMC,0BAA0B,GAAGD,eAAe,IAAI;AAClDpC,IAAAA,cAAc,GAAG,IAAjB;AACAyB,IAAAA,SAAS,CAAC,EAAD,CAAT;AACAJ,IAAAA,eAAe,CAAC;AAAEe,MAAAA;AAAF,KAAD,CAAf;AACH,GAJD;;AAMA,sBACI;AAAA,4BACI,QAAC,GAAD;AAAA,6BACI,QAAC,GAAD;AAAK,QAAA,EAAE,EAAE;AAACE,UAAAA,IAAI,EAAE,EAAP;AAAWC,UAAAA,MAAM,EAAE;AAAnB,SAAT;AAAA,+BACI;AAAA,kCAAG,QAAC,eAAD;AAAiB,YAAA,IAAI,EAAE/C;AAAvB;AAAA;AAAA;AAAA;AAAA,kBAAH,eACA;AAAM,YAAA,SAAS,EAAC,cAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADA;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,YADJ,eAOI,QAAC,GAAD;AAAA,6BACI,QAAC,GAAD;AAAK,QAAA,EAAE,EAAE;AAAC8C,UAAAA,IAAI,EAAE,EAAP;AAAWC,UAAAA,MAAM,EAAE;AAAnB,SAAT;AAAA,+BACI;AAAA,kCAAG,QAAC,eAAD;AAAiB,YAAA,IAAI,EAAEhD;AAAvB;AAAA;AAAA;AAAA;AAAA,kBAAH,eACA;AAAM,YAAA,SAAS,EAAC,cAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADA;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,YAPJ,eAaI,QAAC,GAAD;AAAK,MAAA,SAAS,EAAC,eAAf;AAAA,8BACI,QAAC,GAAD;AAAK,QAAA,EAAE,EAAE;AAAC+C,UAAAA,IAAI,EAAC,CAAN;AAASC,UAAAA,MAAM,EAAE;AAAjB,SAAT;AAAA,+BACI,QAAC,MAAD;AAAQ,UAAA,OAAO,EAAEtC,eAAjB;AACQ,UAAA,WAAW,EAAC,cADpB;AAEQ,UAAA,QAAQ,EAAEkC;AAFlB;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,cADJ,eAOI,QAAC,GAAD;AAAK,QAAA,EAAE,EAAE;AAACG,UAAAA,IAAI,EAAC;AAAN,SAAT;AAAmB,QAAA,KAAK,EAAC,QAAzB;AAAA,+BACI,QAAC,MAAD;AAAQ,UAAA,OAAO,EAAElC,mBAAjB;AACQ,UAAA,WAAW,EAAC,iBADpB;AAEQ,UAAA,QAAQ,EAAEiC;AAFlB;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,cAPJ,eAaI,QAAC,GAAD;AAAK,QAAA,EAAE,EAAC,GAAR;AAAY,QAAA,KAAK,EAAC,MAAlB;AAAA,+BACI,QAAC,MAAD;AAAQ,UAAA,KAAK,EAAC,WAAd;AACQ,UAAA,MAAM,EAAElB,QAAQ,CAACP,MAAT,GAAkB,CAAlB,IAAuBJ,YAAY,CAACI,MAAb,GAAsB,CAD7D;AAEQ,UAAA,QAAQ,EAAEO,QAAQ,CAACP,MAAT,KAAoB,CAApB,IAAyBJ,YAAY,CAACI,MAAb,KAAwB,CAFnE;AAGQ,UAAA,OAAO,EAAE,MAAM;AACXsB,YAAAA,aAAa;AACZ,WALb;AAAA,kCAKe,QAAC,eAAD;AAAiB,YAAA,IAAI,EAAEzC;AAAvB;AAAA;AAAA;AAAA;AAAA,kBALf,EAKmD,GALnD;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,cAbJ;AAAA;AAAA;AAAA;AAAA;AAAA,YAbJ,eAqCI,QAAC,GAAD;AAAA,6BACI,QAAC,GAAD;AAAK,QAAA,EAAE,EAAE;AAAC6C,UAAAA,IAAI,EAAE,EAAP;AAAWC,UAAAA,MAAM,EAAE;AAAnB,SAAT;AAAA,kBAEI,CAACvC,cAAD,KAAoBmB,QAAQ,CAACP,MAAT,GAAkB,CAAlB,IAAuBJ,YAAY,CAACI,MAAb,GAAsB,CAAjE,KAAuEY,MAAM,CAACZ,MAAP,KAAkB,CAAzF,iBACI,QAAC,KAAD;AAAO,UAAA,KAAK,EAAC,QAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAHR;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,YArCJ,EA+CQY,MAAM,CAACZ,MAAP,GAAgB,CAAhB,iBAEA;AAAA,8BACI,QAAC,GAAD;AAAA,+BACI,QAAC,GAAD;AAAK,UAAA,EAAE,EAAE;AAAC0B,YAAAA,IAAI,EAAE,EAAP;AAAWC,YAAAA,MAAM,EAAE;AAAnB,WAAT;AAAA,iCACI;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,cADJ,eAMI,QAAC,GAAD;AAAA,+BACI,QAAC,GAAD;AAAK,UAAA,EAAE,EAAE;AAACD,YAAAA,IAAI,EAAC,CAAN;AAASC,YAAAA,MAAM,EAAC;AAAhB,WAAT;AAAA,iCACI,QAAC,KAAD;AAAA,uBAAQf,MAAM,CAACZ,MAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA,cANJ,eAWI,QAAC,QAAD;AAAU,QAAA,QAAQ,EAAEY;AAApB;AAAA;AAAA;AAAA;AAAA,cAXJ;AAAA,oBAjDR;AAAA,kBADJ;AAqEH,CA9GD;;GAAMN,M;;KAAAA,M;AAgHN,eAAeA,MAAf","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport Select from \"react-select\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faFilter, faHome, faSearch } from '@fortawesome/free-solid-svg-icons';\nimport { Row, Col, Button, Alert, Badge } from \"reactstrap\";\nimport Listings from \"./Listings\";\n\nlet searchingBegun = false;\n\nconst roomTypeOptions = [\n    { value: 'Any', label: 'Any type'},\n    { value: 'Entire home/apt', label: 'Entire home/apt' },\n    { value: 'Private room', label: 'Private room' },\n    { value: 'Shared room', label: 'Shared room'},\n    { value: 'Hotel room', label: 'Hotel room'}\n]\n\nconst neighborhoodOptions = [\n    { value: 'Broadway', label: 'Broadway' },\n    { value: 'Belltown', label: 'Belltown' },\n    { value: 'Wallingford', label: 'Wallingford'},\n    { value: 'Central Business District', label: 'Central Business District' },\n    { value: 'University District', label: 'University District'},\n    { value: 'Minor', label: 'Minor'},\n    { value: 'Fremont', label: 'Fremont'},\n    { value: 'Pike-Market', label: 'Pike-Market'}\n]\n\nconst getSearchedListings = (listings, type, neighborhood) => {\n    let searchedResults = [...listings];\n    console.log(\"get search\", type);\n    if (type.length > 0 && type[0].value !== 'Any') {\n        searchedResults = searchedResults.filter(listing => listing['RoomType'] === type[0].value)\n    };\n    if (neighborhood.length > 0) {\n        searchedResults = searchedResults.filter(listing => listing['Neighborhood'] === neighborhood[0].value);\n    };\n    return searchedResults;\n}\n\nlet headers = new Headers();\n\nheaders.append('Content-Type', 'application/json');\nheaders.append('Origin','http://localhost:4002');\n\nconst Search = () => {\n    const [roomType, setRoomType] = useState([]);\n    const [neighborhood, setNeighborhood] = useState([]);\n    const [data, setData] = useState([]);\n    const [result, setResult] = useState([]);\n\n    useEffect(() => {\n        fetch('http://localhost:4002/listings',{\n            mode: 'cors',\n            method: 'GET',\n            headers: headers\n        })\n            .then(response => response.json())\n            .then(data => {\n                setData(data);\n            })\n            .catch(error => {\n                console.error('Error fetching listings' + error);\n            })\n    },[]);\n\n    const onSearchClick = () => {\n        searchingBegun = false;\n        console.log(roomType);\n        console.log(neighborhood);\n        setResult(getSearchedListings(data, roomType, neighborhood));\n    }\n\n    const onTypeOptionChange = selectedOptions => {\n        console.log(selectedOptions);\n        searchingBegun = true;\n        setResult([]);\n        setRoomType({ selectedOptions });\n    }\n\n    const onNeighborhoodOptionChange = selectedOptions => {\n        searchingBegun = true;\n        setResult([]);\n        setNeighborhood({ selectedOptions });\n    }\n\n    return (\n        <>\n            <Row>\n                <Col md={{size: 10, offset: 1}}>\n                    <p><FontAwesomeIcon icon={faHome} />\n                    <span className=\"left-padding\">Places to stay in Seattle. </span></p>\n                </Col>\n            </Row>\n            <Row>\n                <Col md={{size: 10, offset: 1}}>\n                    <p><FontAwesomeIcon icon={faFilter} />\n                    <span className=\"left-padding\">Select at least one option to begin:  </span></p>\n                </Col>\n            </Row>\n            <Row className=\"bottom-margin\">\n                <Col md={{size:4, offset: 1}}>\n                    <Select options={roomTypeOptions}\n                            placeholder=\"Room Type...\"\n                            onChange={onTypeOptionChange}\n                            />\n                </Col>\n                <Col md={{size:4}} align=\"center\">\n                    <Select options={neighborhoodOptions}\n                            placeholder=\"Neighborhood...\"\n                            onChange={onNeighborhoodOptionChange}\n                            />\n                </Col>\n                <Col md=\"3\" align=\"left\">\n                    <Button color=\"secondary\"\n                            active={roomType.length > 0 || neighborhood.length > 0}\n                            disabled={roomType.length === 0 && neighborhood.length === 0}\n                            onClick={() => {\n                                onSearchClick();\n                                }}><FontAwesomeIcon icon={faSearch} />{' '}\n                        Search\n                    </Button>\n                </Col>\n            </Row>\n            <Row>\n                <Col md={{size: 10, offset: 1}}>\n                {\n                    !searchingBegun && (roomType.length > 0 || neighborhood.length > 0) && result.length === 0 &&\n                        <Alert color=\"danger\">The listings doesn't have satisfied result for your query.\n                        Modify your configuration and try again!</Alert>\n                }\n                </Col>\n            </Row>\n            {\n                result.length > 0 \n                && \n                <>\n                    <Row>\n                        <Col md={{size: 10, offset: 1}}>\n                            <hr />\n                        </Col>\n                    </Row>\n                    <Row>\n                        <Col xs={{size:3, offset:1}}>\n                            <Badge>{result.length} stays in Seattle</Badge>\n                        </Col>\n                    </Row>\n                    <Listings listings={result} />\n                </>\n            }\n        </>\n    )\n\n\n\n}\n\nexport default Search;"]},"metadata":{},"sourceType":"module"}