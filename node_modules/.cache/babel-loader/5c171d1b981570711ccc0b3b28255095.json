{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/Users/monkey/Documents/cs6620_db/project/PM6/safe_travel/src/components/Search.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport Select from \"react-select\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faFilter, faHome, faSearch } from '@fortawesome/free-solid-svg-icons';\nimport { Row, Col, Button, Alert, Badge } from \"reactstrap\";\nimport Listings from \"./Listings\";\nlet searchingBegun = false;\nconst roomTypeOptions = [{\n  value: 'Any',\n  label: 'Any type'\n}, {\n  value: 'Entire home/apt',\n  label: 'Entire home/apt'\n}, {\n  value: 'Private room',\n  label: 'Private room'\n}, {\n  value: 'Shared room',\n  label: 'Shared room'\n}, {\n  value: 'Hotel room',\n  label: 'Hotel room'\n}];\nconst neighborhoodOptions = [{\n  value: 'Broadway',\n  label: 'Broadway'\n}, {\n  value: 'Belltown',\n  label: 'Belltown'\n}, {\n  value: 'Wallingford',\n  label: 'Wallingford'\n}, {\n  value: 'Central Business District',\n  label: 'Central Business District'\n}, {\n  value: 'University District',\n  label: 'University District'\n}, {\n  value: 'Minor',\n  label: 'Minor'\n}, {\n  value: 'Fremont',\n  label: 'Fremont'\n}, {\n  value: 'Pike-Market',\n  label: 'Pike-Market'\n}];\n\nconst getSearchedListings = (listings, type, neighborhood) => {\n  let searchedResults = [...listings];\n\n  if (type.length > 0 && type.selectedOptions.value !== 'Any') {\n    searchedResults = searchedResults.filter(listing => listing['RoomType'] === type.selectedOptions.value);\n  }\n\n  ;\n\n  if (neighborhood.length > 0) {\n    let result = [];\n\n    for (let i = 0; i < neighborhood.selectedOptions.length; i++) {\n      result = [...searchedResults.filter(listing => listing['Neighborhood'] === neighborhood.selectedOptions.value), result];\n    }\n\n    searchedResults = [...result];\n  }\n\n  ;\n  return searchedResults;\n};\n\nlet headers = new Headers();\nheaders.append('Content-Type', 'application/json');\nheaders.append('Origin', 'http://localhost:4002');\n\nconst Search = () => {\n  _s();\n\n  const [roomType, setRoomType] = useState([]);\n  const [neighborhood, setNeighborhood] = useState([]);\n  const [data, setData] = useState([]);\n  const [result, setResult] = useState([]);\n  useEffect(() => {\n    fetch('http://localhost:4002/listings', {\n      mode: 'cors',\n      method: 'GET',\n      headers: headers\n    }).then(response => response.json()).then(data => {\n      setData(data);\n    }).catch(error => {\n      console.error('Error fetching listings' + error);\n    });\n  }, []);\n\n  const onSearchClick = () => {\n    searchingBegun = false;\n    console.log(roomType);\n    console.log(neighborhood);\n    setResult(getSearchedListings(data, roomType, neighborhood));\n  };\n\n  const onTypeOptionChange = selectedOptions => {\n    console.log(selectedOptions);\n    searchingBegun = true;\n    setResult([]);\n    setRoomType({\n      selectedOptions\n    });\n  };\n\n  const onNeighborhoodOptionChange = selectedOptions => {\n    searchingBegun = true;\n    setResult([]);\n    setNeighborhood({\n      selectedOptions\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Row, {\n      children: /*#__PURE__*/_jsxDEV(Col, {\n        md: {\n          size: 10,\n          offset: 1\n        },\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [/*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n            icon: faHome\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 94,\n            columnNumber: 24\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"left-padding\",\n            children: \"Places to stay in Seattle. \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 95,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Row, {\n      children: /*#__PURE__*/_jsxDEV(Col, {\n        md: {\n          size: 10,\n          offset: 1\n        },\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [/*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n            icon: faFilter\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 100,\n            columnNumber: 24\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"left-padding\",\n            children: \"Select at least one option to begin:  \"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 101,\n            columnNumber: 21\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Row, {\n      className: \"bottom-margin\",\n      children: [/*#__PURE__*/_jsxDEV(Col, {\n        md: {\n          size: 4,\n          offset: 1\n        },\n        children: /*#__PURE__*/_jsxDEV(Select, {\n          options: roomTypeOptions,\n          placeholder: \"Room Type...\",\n          onChange: onTypeOptionChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Col, {\n        md: {\n          size: 4\n        },\n        align: \"center\",\n        children: /*#__PURE__*/_jsxDEV(Select, {\n          options: neighborhoodOptions,\n          isMulti: true,\n          placeholder: \"Neighborhood...\",\n          onChange: onNeighborhoodOptionChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Col, {\n        md: \"3\",\n        align: \"left\",\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          color: \"secondary\",\n          active: roomType.length > 0 || neighborhood.length > 0,\n          disabled: roomType.length === 0 && neighborhood.length === 0,\n          onClick: () => {\n            onSearchClick();\n          },\n          children: [/*#__PURE__*/_jsxDEV(FontAwesomeIcon, {\n            icon: faSearch\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 124,\n            columnNumber: 36\n          }, this), ' ', \"Search\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 104,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Row, {\n      children: /*#__PURE__*/_jsxDEV(Col, {\n        md: {\n          size: 10,\n          offset: 1\n        },\n        children: !searchingBegun && (roomType.length > 0 || neighborhood.length > 0) && result.length === 0 && /*#__PURE__*/_jsxDEV(Alert, {\n          color: \"danger\",\n          children: \"The listings doesn't have satisfied result for your query. Modify your configuration and try again!\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 129,\n      columnNumber: 13\n    }, this), result.length > 0 && /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(Row, {\n        children: /*#__PURE__*/_jsxDEV(Col, {\n          md: {\n            size: 10,\n            offset: 1\n          },\n          children: /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 144,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 143,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(Row, {\n        children: /*#__PURE__*/_jsxDEV(Col, {\n          xs: {\n            size: 3,\n            offset: 1\n          },\n          children: /*#__PURE__*/_jsxDEV(Badge, {\n            children: [result.length, \" stays in Seattle\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 149,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 148,\n          columnNumber: 25\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true), /*#__PURE__*/_jsxDEV(Listings, {\n      listings: result\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true);\n};\n\n_s(Search, \"yBjudhhUhszD68NG6tR4kW4BI+4=\");\n\n_c = Search;\nexport default Search;\n\nvar _c;\n\n$RefreshReg$(_c, \"Search\");","map":{"version":3,"sources":["/Users/monkey/Documents/cs6620_db/project/PM6/safe_travel/src/components/Search.js"],"names":["React","useState","useEffect","Select","FontAwesomeIcon","faFilter","faHome","faSearch","Row","Col","Button","Alert","Badge","Listings","searchingBegun","roomTypeOptions","value","label","neighborhoodOptions","getSearchedListings","listings","type","neighborhood","searchedResults","length","selectedOptions","filter","listing","result","i","headers","Headers","append","Search","roomType","setRoomType","setNeighborhood","data","setData","setResult","fetch","mode","method","then","response","json","catch","error","console","onSearchClick","log","onTypeOptionChange","onNeighborhoodOptionChange","size","offset"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport Select from \"react-select\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faFilter, faHome, faSearch } from '@fortawesome/free-solid-svg-icons';\nimport { Row, Col, Button, Alert, Badge } from \"reactstrap\";\nimport Listings from \"./Listings\";\n\nlet searchingBegun = false;\n\nconst roomTypeOptions = [\n    { value: 'Any', label: 'Any type'},\n    { value: 'Entire home/apt', label: 'Entire home/apt' },\n    { value: 'Private room', label: 'Private room' },\n    { value: 'Shared room', label: 'Shared room'},\n    { value: 'Hotel room', label: 'Hotel room'}\n]\n\nconst neighborhoodOptions = [\n    { value: 'Broadway', label: 'Broadway' },\n    { value: 'Belltown', label: 'Belltown' },\n    { value: 'Wallingford', label: 'Wallingford'},\n    { value: 'Central Business District', label: 'Central Business District' },\n    { value: 'University District', label: 'University District'},\n    { value: 'Minor', label: 'Minor'},\n    { value: 'Fremont', label: 'Fremont'},\n    { value: 'Pike-Market', label: 'Pike-Market'}\n]\n\nconst getSearchedListings = (listings, type, neighborhood) => {\n    let searchedResults = [...listings];\n    if (type.length > 0 && type.selectedOptions.value !== 'Any') {\n        searchedResults = searchedResults.filter(listing => listing['RoomType'] === type.selectedOptions.value)\n    };\n    if (neighborhood.length > 0) {\n        let result = [];\n        for (let i = 0; i < neighborhood.selectedOptions.length; i++) {\n            result = [...searchedResults.filter(listing => listing['Neighborhood'] === neighborhood.selectedOptions.value), result];\n        }\n        searchedResults = [...result];\n    };\n    return searchedResults;\n}\n\nlet headers = new Headers();\n\nheaders.append('Content-Type', 'application/json');\nheaders.append('Origin','http://localhost:4002');\n\nconst Search = () => {\n    const [roomType, setRoomType] = useState([]);\n    const [neighborhood, setNeighborhood] = useState([]);\n    const [data, setData] = useState([]);\n    const [result, setResult] = useState([]);\n\n    useEffect(() => {\n        fetch('http://localhost:4002/listings',{\n            mode: 'cors',\n            method: 'GET',\n            headers: headers\n        })\n            .then(response => response.json())\n            .then(data => {\n                setData(data);\n            })\n            .catch(error => {\n                console.error('Error fetching listings' + error);\n            })\n    },[]);\n\n    const onSearchClick = () => {\n        searchingBegun = false;\n        console.log(roomType);\n        console.log(neighborhood);\n        setResult(getSearchedListings(data, roomType, neighborhood));\n    }\n\n    const onTypeOptionChange = selectedOptions => {\n        console.log(selectedOptions);\n        searchingBegun = true;\n        setResult([]);\n        setRoomType({ selectedOptions });\n    }\n\n    const onNeighborhoodOptionChange = selectedOptions => {\n        searchingBegun = true;\n        setResult([]);\n        setNeighborhood({ selectedOptions });\n    }\n\n    return (\n        <>\n            <Row>\n                <Col md={{size: 10, offset: 1}}>\n                    <p><FontAwesomeIcon icon={faHome} />\n                    <span className=\"left-padding\">Places to stay in Seattle. </span></p>\n                </Col>\n            </Row>\n            <Row>\n                <Col md={{size: 10, offset: 1}}>\n                    <p><FontAwesomeIcon icon={faFilter} />\n                    <span className=\"left-padding\">Select at least one option to begin:  </span></p>\n                </Col>\n            </Row>\n            <Row className=\"bottom-margin\">\n                <Col md={{size:4, offset: 1}}>\n                    <Select options={roomTypeOptions}\n                            placeholder=\"Room Type...\"\n                            onChange={onTypeOptionChange}\n                            />\n                </Col>\n                <Col md={{size:4}} align=\"center\">\n                    <Select options={neighborhoodOptions}\n                            isMulti\n                            placeholder=\"Neighborhood...\"\n                            onChange={onNeighborhoodOptionChange}\n                            />\n                </Col>\n                <Col md=\"3\" align=\"left\">\n                    <Button color=\"secondary\"\n                            active={roomType.length > 0 || neighborhood.length > 0}\n                            disabled={roomType.length === 0 && neighborhood.length === 0}\n                            onClick={() => {\n                                onSearchClick();\n                                }}><FontAwesomeIcon icon={faSearch} />{' '}\n                        Search\n                    </Button>\n                </Col>\n            </Row>\n            <Row>\n                <Col md={{size: 10, offset: 1}}>\n                {\n                    !searchingBegun && (roomType.length > 0 || neighborhood.length > 0) && result.length === 0 &&\n                        <Alert color=\"danger\">The listings doesn't have satisfied result for your query.\n                        Modify your configuration and try again!</Alert>\n                }\n                </Col>\n            </Row>\n            {\n                result.length > 0 \n                && \n                <>\n                    <Row>\n                        <Col md={{size: 10, offset: 1}}>\n                            <hr />\n                        </Col>\n                    </Row>\n                    <Row>\n                        <Col xs={{size:3, offset:1}}>\n                            <Badge>{result.length} stays in Seattle</Badge>\n                        </Col>\n                    </Row>\n                </>\n            }\n            <Listings listings={result} />\n        </>\n    )\n\n\n\n}\n\nexport default Search;"]},"metadata":{},"sourceType":"module"}